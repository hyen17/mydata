(function() {
  // 1. Definisikan aturan CSS untuk print
  var cssRules = `
    @media print {
      
      /* ATURAN LAMA: (Masih berguna untuk item pendek)
         Coba untuk tidak memotong seluruh kontainer item. */
      .QuestionItem-module__container--OivH7,
      .PrintQuiz-module__questionText--dgDVs {
        page-break-inside: avoid !important;
        break-inside: avoid !important;
      }

      /* ATURAN BARU: (Untuk memperbaiki item panjang)
         JANGAN PERNAH memotong halaman SETELAH header.
         Ini "merekatkan" header ke konten di bawahnya. */
      .QuestionItem-module__questionHeader--MKsJT {
        page-break-after: avoid !important;
        break-after: avoid !importan_t; 
      }
    }
  `;

  // 2. Buat atau perbarui elemen <style>
  var styleId = 'gemini-print-fix';
  var styleElement = document.getElementById(styleId);
  
  // Jika belum ada, buat baru
  if (!styleElement) {
    styleElement = document.createElement('style');
    styleElement.id = styleId;
    styleElement.type = 'text/css';
    document.head.appendChild(styleElement);
  }

  // 3. Masukkan aturan CSS baru
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = cssRules;
  } else {
    styleElement.innerHTML = ''; // Hapus aturan lama
    styleElement.appendChild(document.createTextNode(cssRules));
  }

  console.log('Aturan CSS print telah DIPERBARUI!');
  console.log('Menambahkan aturan untuk "merekatkan" header ke konten.');
})();
